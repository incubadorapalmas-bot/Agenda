<!DOCTYPE html>
<html lang="pt-BR" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <title>Agenda Incubadora IFPR/PMP</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Firebase (compat) -->
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-storage-compat.js"></script>

  <!-- jsPDF para gera√ß√£o de PDFs -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="topo">
    <div class="container topo__conteudo">
      <div>
        <h1>Agenda Incubadora IFPR / PMP</h1>
        <p class="subtitulo">Controle de eventos, fotos e relat√≥rios em PDF</p>
      </div>
      <button id="themeToggle" class="btn toggle-tema" type="button" aria-label="Alternar modo claro/escuro">
        üåô
      </button>
    </div>
  </header>

  <main class="container principal">
    <section id="form-section" class="card">
      <h2><span id="formTituloModo">Cadastrar novo evento</span></h2>
      <form id="eventoForm" autocomplete="off">
        <input type="hidden" id="eventoId" />

        <div class="linha">
          <div class="campo">
            <label for="evento">Tipo de evento</label>
            <select id="evento" required>
              <option value="">Selecione...</option>
              <option>Orienta√ß√£o</option>
              <option>Atendimento</option>
              <option>Alinhamento</option>
              <option>Reuni√£o</option>
              <option>Participa√ß√£o</option>
              <option>Visita T√©cnica</option>
              <option>Outro</option>
            </select>
          </div>
          <div class="campo">
            <label for="local">Local</label>
            <input id="local" type="text" value="Incubadora" required />
          </div>
          <div class="campo">
            <label for="endereco">Endere√ßo</label>
            <input id="endereco" type="text" value="PRC 280 Palmas PR" />
          </div>
        </div>

        <div class="linha">
          <div class="campo">
            <label for="dataInicio">Data in√≠cio</label>
            <input id="dataInicio" type="date" required />
          </div>
          <div class="campo">
            <label for="dataFim">Data fim</label>
            <input id="dataFim" type="date" />
          </div>
          <div class="campo">
            <label for="formato">Formato</label>
            <select id="formato">
              <option>Presencial</option>
              <option>Online</option>
              <option>H√≠brido</option>
            </select>
          </div>
        </div>

        <div class="linha">
          <div class="campo">
            <label for="horaInicio">Hor√°rio in√≠cio</label>
            <input id="horaInicio" type="time" />
          </div>
          <div class="campo">
            <label for="horaFim">Hor√°rio fim</label>
            <input id="horaFim" type="time" />
          </div>
          <div class="campo">
            <label for="participante">Participante / respons√°vel</label>
            <input id="participante" type="text" />
          </div>
        </div>

        <div class="campo">
          <label for="pauta">Pauta</label>
          <input id="pauta" type="text" />
        </div>

        <div class="campo">
          <label for="comentario">Coment√°rio</label>
          <textarea id="comentario" rows="3"></textarea>
        </div>

        <div class="campo">
          <label>Fotos do evento</label>
          <div id="dropArea" class="drop-area">
            <p>Arraste e solte as fotos aqui ou <span class="drop-area__link">clique para selecionar</span></p>
            <input id="fotos" type="file" accept="image/*" multiple hidden />
          </div>
          <small>As fotos ser√£o enviadas para o Firebase Storage e vinculadas ao evento.</small>
          <div id="novasFotosPreview" class="fotos-grid novas-fotos"></div>
        </div>

        <div id="fotosAtuaisWrapper" class="fotos-atuais oculto">
          <p class="fotos-atuais__titulo">Fotos j√° cadastradas para este evento:</p>
          <div id="fotosAtuais" class="fotos-grid"></div>
        </div>

        <div class="botoes-form">
          <button type="submit" class="btn primario" id="btnSalvar">Salvar evento</button>
          <button type="button" class="btn secundario oculto" id="btnCancelarEdicao">Cancelar edi√ß√£o</button>
        </div>
      </form>
    </section>

    <section id="lista-section" class="card">
      <div class="cabecalho-lista">
        <div>
          <h2>Eventos cadastrados</h2>
          <p class="subtexto">Clique em uma linha ou em ‚ÄúEditar / Fotos‚Äù para alterar o relat√≥rio do evento.</p>
        </div>
        <div class="filtros">
          <label>De:
            <input type="date" id="filtroDe">
          </label>
          <label>At√©:
            <input type="date" id="filtroAte">
          </label>
          <button id="btnFiltrar" class="btn">Filtrar</button>
          <button id="btnLimparFiltro" class="btn secundario">Limpar</button>
        </div>
      </div>

      <div class="tabela-container">
        <table id="tabelaEventos">
          <thead>
            <tr>
              <th>Data</th>
              <th>Evento</th>
              <th>Local</th>
              <th>Endere√ßo</th>
              <th>Hor√°rio</th>
              <th>Formato</th>
              <th>Participante</th>
              <th>Pauta</th>
              <th>Coment√°rio</th>
              <th style="width: 170px;">A√ß√µes</th>
            </tr>
          </thead>
          <tbody>
            <!-- linhas via JS -->
          </tbody>
        </table>
      </div>

      <div class="relatorios">
        <span>Relat√≥rios gerais:</span>
        <button id="btnPdfCompleto" class="btn primario">PDF completo</button>
        <button id="btnPdfSimples" class="btn">PDF simples (Michelle)</button>
      </div>
    </section>
  </main>

  <footer class="rodape">
    <div class="container">
      <small>Agenda Incubadora IFPR / PMP &mdash; Firebase Firestore + Storage</small>
    </div>
  </footer>

  <script src="firebase-config.js"></script>
  <script src="theme.js"></script>
  <script src="app.js"></script>
</body>
</html>
