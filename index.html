<!doctype html>
<html lang="pt-BR" data-theme="light">
<head>
  <meta charset="utf-8" />
  <title>Agenda Incubadora IFPR / PMP</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- estilos -->
  <link rel="stylesheet" href="style.css" />

  <!-- Firebase (SDK v8 compat) -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

  <!-- firebase-config (deve existir no repo) -->
  <script src="firebase-config.js"></script>

  <!-- jsPDF (usado para gerar PDFs) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <!-- theme toggle helper -->
  <script src="theme.js"></script>

  <!-- app.js (l√≥gica da aplica√ß√£o) -->
  <script src="app.js" defer></script>
</head>

<body>
  <header class="topo" role="banner">
    <div class="container topo__conteudo">
      <div style="display:flex;align-items:center;gap:0.75rem;min-width:0;">
        <div class="topo__logos" aria-hidden="true">
          <img src="PMP.png" alt="PMP" class="logo" />
          <img src="IFPR.png" alt="IFPR" class="logo" />
          <img src="Sebrae.png" alt="Sebrae" class="logo" />
        </div>

        <div class="topo__titulo" role="heading" aria-level="1">
          <h1>Agenda Incubadora IFPR / PMP</h1>
          <p class="subtitulo">Controle de eventos, fotos e relat√≥rios em PDF</p>
        </div>
      </div>

      <!-- Menu / a√ß√µes r√°pidas -->
      <nav class="topo__actions" role="navigation" aria-label="A√ß√µes r√°pidas">
        <button id="btnPdfCompleto" class="btn primario" title="Gerar relat√≥rio gerencial (com fotos)">Gerar PDF Completo</button>
        <button id="btnPdfSimples" class="btn secundario" title="Gerar agenda simplificada">Gerar PDF Simples</button>
        <button id="btnToggleTema" class="btn" title="Alternar tema" aria-pressed="false">üåô</button>
      </nav>
    </div>
  </header>

  <main class="container principal" role="main">
    <!-- FORMUL√ÅRIO -->
    <section id="form-section" class="card" aria-labelledby="formTituloModo">
      <h2 id="formTituloModo">Cadastrar novo evento</h2>
      <form id="eventoForm" autocomplete="off">
        <input type="hidden" id="eventoId" />

        <div class="linha">
          <div class="campo">
            <label for="evento">Tipo de evento</label>
            <input id="evento" type="text" required />
          </div>

          <div class="campo">
            <label for="local">Local</label>
            <input id="local" type="text" />
          </div>

          <div class="campo">
            <label for="endereco">Endere√ßo</label>
            <input id="endereco" type="text" />
          </div>
        </div>

        <div class="linha">
          <div class="campo">
            <label for="dataInicio">Data in√≠cio</label>
            <input id="dataInicio" type="date" />
          </div>

          <div class="campo">
            <label for="dataFim">Data fim</label>
            <input id="dataFim" type="date" />
          </div>

          <div class="campo">
            <label for="formato">Formato</label>
            <select id="formato">
              <option>Presencial</option>
              <option>Online</option>
              <option>H√≠brido</option>
            </select>
          </div>
        </div>

        <div class="linha">
          <div class="campo">
            <label for="horaInicio">Hora in√≠cio</label>
            <input id="horaInicio" type="time" />
          </div>

          <div class="campo">
            <label for="horaFim">Hora fim</label>
            <input id="horaFim" type="time" />
          </div>

          <div class="campo">
            <label for="participante">Participante / Respons√°vel</label>
            <input id="participante" type="text" />
          </div>
        </div>

        <div class="linha">
          <div class="campo" style="grid-column: 1 / -1;">
            <label for="pauta">Pauta</label>
            <textarea id="pauta" rows="3"></textarea>
          </div>
        </div>

        <div class="linha">
          <div class="campo" style="grid-column: 1 / -1;">
            <label for="comentario">Coment√°rio</label>
            <textarea id="comentario" rows="2"></textarea>
          </div>
        </div>

        <div class="linha">
          <div class="campo" style="grid-column: 1 / -1;">
            <label for="fotos">Fotos (arraste ou selecione)</label>
            <div id="dropArea" class="drop-area" tabindex="0">Arraste as fotos aqui ou <span class="drop-area__link">clique para selecionar</span></div>
            <input id="fotos" type="file" accept="image/*,image/heic,image/heif" multiple style="display:none;" />
            <div id="novasFotosPreview" class="preview"></div>
          </div>
        </div>

        <div class="linha">
          <div class="campo">
            <label for="codigo">C√≥digo (apenas leitura ap√≥s salvar)</label>
            <input id="codigo" type="text" readonly />
          </div>

          <div style="grid-column: 2 / -1; display:flex; align-items:end; justify-content:flex-end;">
            <div class="botoes" role="group" aria-label="A√ß√µes do formul√°rio">
              <button id="btnSalvar" type="submit" class="btn primario">Salvar evento</button>
              <button id="btnCancelarEdicao" type="button" class="btn secundario oculto">Cancelar</button>
            </div>
          </div>
        </div>
      </form>
    </section>

    <!-- FILTROS E LISTA -->
    <section id="lista-section" class="card" style="margin-top:16px;">
      <h2>Eventos</h2>

      <div class="filtros" style="margin-bottom:12px;">
        <div class="linha" style="grid-template-columns: repeat(3, minmax(0, 1fr)); gap:10px;">
          <div class="campo">
            <label for="filtroDe">De</label>
            <input id="filtroDe" type="date" />
          </div>

          <div class="campo">
            <label for="filtroAte">At√©</label>
            <input id="filtroAte" type="date" />
          </div>

          <div style="display:flex;gap:8px;align-items:end;">
            <button id="btnFiltrar" class="btn">Aplicar per√≠odo</button>
            <button id="btnLimparFiltro" class="btn secundario">Limpar per√≠odo</button>
          </div>
        </div>

        <div class="linha" style="margin-top:8px;align-items:center;grid-template-columns:repeat(4,minmax(0,1fr));gap:8px;">
          <div class="campo">
            <label for="filterField">Filtrar por</label>
            <select id="filterField">
              <option value="">-- selecionar --</option>
              <option value="codigo">C√≥digo</option>
              <option value="evento">Evento</option>
              <option value="local">Local</option>
              <option value="participante">Participante</option>
              <option value="id">ID do documento</option>
            </select>
          </div>

          <div class="campo">
            <label for="filterValue">Valor (igualdade)</label>
            <input id="filterValue" type="text" placeholder="Valor (igualdade)" />
          </div>

          <div style="display:flex;gap:8px;align-items:end;">
            <button id="btnAplicarIs" class="btn">Aplicar IS</button>
            <button id="btnLimparIs" class="btn secundario">Limpar IS</button>
          </div>

          <div style="align-self:end;">
            <small style="color:var(--muted);">Combina√ß√£o where+order pode exigir √≠ndice no Firebase.</small>
          </div>
        </div>
      </div>

      <div class="table-responsive">
        <table id="tabelaEventos" class="table" role="table" aria-label="Tabela de eventos">
          <thead role="rowgroup">
            <tr role="row">
              <th role="columnheader">ID</th>
              <th role="columnheader">Data</th>
              <th role="columnheader">Evento</th>
              <th role="columnheader">Local</th>
              <th role="columnheader">Endere√ßo</th>
              <th role="columnheader">Horario</th>
              <th role="columnheader">Formato</th>
              <th role="columnheader">Participante</th>
              <th role="columnheader">Pauta</th>
              <th role="columnheader">Coment√°rio</th>
              <th role="columnheader">A√ß√µes</th>
            </tr>
          </thead>
          <tbody role="rowgroup">
            <!-- preenchido dinamicamente -->
          </tbody>
        </table>
      </div>

    </section>

    <!-- Fotos salvas (ao editar) -->
    <section id="fotos-section" class="card" style="margin-top:16px;">
      <h3>Fotos do evento</h3>
      <div id="fotosAtuaisWrapper" class="oculto fotos-atuais">
        <div id="fotosAtuais" class="fotos-grid"></div>
      </div>
    </section>
  </main>

  <footer class="rodape" role="contentinfo">
    Agenda Incubadora IFPR / PMP ‚Äî verifique as instru√ß√µes no console se ocorrer erro.
  </footer>
</body>
</html>